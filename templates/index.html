<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MetaSpace | Mission Control</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <header>
        <div class="brand">
            <span style="font-size:24px;">❖</span> MetaSpace<span style="opacity:0.6; font-size:0.7em; margin-left:5px;">.bio v2.0</span>
        </div>
        <div class="status-bar">
            <div class="status-item">SYSTEM: <span style="color:var(--success-green)">ONLINE</span></div>
            <div class="status-item">LOGIC: <span style="color:var(--neon-blue)">DETERMINISTIC</span></div>
            <div class="status-item">SOLVER: <span id="live-status" style="color:var(--warning-yellow)">STANDBY</span></div>
        </div>
        <div>
            <a href="/about" style="color:var(--neon-cyan); text-decoration:none; font-size:12px; border:1px solid var(--neon-cyan); padding:5px 10px;">DOCS / METHODOLOGY</a>
        </div>
    </header>

    <div class="mission-control">
        
        <aside class="panel controls-area">
            <div class="panel-title">Flight Configuration</div>
            
            <div class="control-group">
                <label>INJECTION SCENARIO</label>
                <select id="scenario-select">
                    <option value="solar_panel">Solar Panel Structural Failure</option>
                    <option value="gps_antenna">GPS Spoofing / Signal Loss</option>
                    <option value="battery_failure">Battery Thermal Runaway</option>
                    <option value="imu_drift">IMU Gyro Bias Drift</option>
                    <option value="nominal">Nominal Flight (Control)</option>
                </select>
            </div>

            <div class="control-group">
                <label>MISSION DURATION (DAYS)</label>
                <input type="number" id="duration-input" value="60" min="20" max="365">
            </div>

            <div style="margin-top:auto;">
                <p style="font-size:12px; color:#666; margin-bottom:10px;">
                    *Initiating simulation will trigger the Python physics engine and SMT solver.
                </p>
                <button id="sim-btn" class="btn-launch" onclick="runSimulation()">
                    EXECUTE SIMULATION
                </button>
            </div>
        </aside>

        <section class="panel tactical-display">
            <div class="panel-title">Mission Feasibility Analysis (Reliability Curve)</div>
            <div class="chart-wrapper">
                <div class="placeholder-state" id="chart-placeholder" style="color:#555; text-align:center; padding-top:100px;">
                    [ AWAITING TELEMETRY DATA ]<br>
                    <small>Select a scenario to visualize EKF vs MetaSpace performance</small>
                </div>
                <canvas id="feasibilityChart" style="display:none;"></canvas>
            </div>
        </section>

        <aside class="panel telemetry-bay">
            <div class="panel-title">Component Health Matrix (Level 1)</div>
            <div id="component-grid">
                <div style="padding:20px; text-align:center; color:#555;">Waiting for link...</div>
            </div>
        </aside>

        <section class="panel logs-console">
            <div style="border-right: 1px solid rgba(255,255,255,0.1); padding-right:15px;">
                <div class="panel-title">Tactical Analysis</div>
                <div id="narrative-box">
                    <span style="color:#555;">> System initialized.</span><br>
                    <span style="color:#555;">> Loaded kinematic model: Landsat-9 (NASA)</span><br>
                    <span style="color:#555;">> Waiting for input...</span>
                </div>
            </div>
            <div>
                <div class="panel-title">Invariant Verification Stream</div>
                <div id="bio-stream" style="height:150px; overflow:hidden;">
                    <div class="log-entry">[T-0] Z3 Solver Loaded.</div>
                </div>
            </div>
        </section>

    </div>

    <div id="intro-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="modal-close" style="float:right; cursor:pointer; color:var(--neon-cyan); font-size:24px;" onclick="document.getElementById('intro-modal').style.display='none'">&times;</span>
            
            <h2 style="color:#fff; margin-top:0; font-family:'Orbitron'">MetaSpace Validation Environment</h2>
            <p style="color:#aaa;">Ez az eszköz a MetaSpace determinisztikus FDIR algoritmus validációs környezete (TRL-4).</p>
            
            <div style="border-left: 3px solid var(--neon-cyan); padding-left:15px; margin:20px 0; color:#ddd;">
                <p><strong>Cél:</strong> Demonstrálni a különbséget a sztochasztikus (EKF) és az invariáns-alapú (MetaSpace) hibakezelés között.</p>
                <p><strong>Hogyan használd:</strong> Válassz egy hibaforrást a bal oldali panelen, és figyeld meg a "Component Health Matrix" szelektív izolációs képességét.</p>
            </div>
            
            <div style="margin-bottom: 20px;">
                <button class="btn-launch" style="width:auto; padding:10px 30px; display:inline-block; margin-right:10px;" onclick="closeModalAndRun()">Load Solar Panel Demo</button>
                <button class="btn-launch" style="width:auto; padding:10px 30px; border-color:#555; color:#aaa; display:inline-block;" onclick="document.getElementById('intro-modal').style.display='none'">Manual Config</button>
            </div>

            <div class="sys-req">
                ⚠ OPTIMAL DISPLAY: 1920x1080 (DESKTOP) | MINIMUM VIEWPORT WIDTH: 1280px
            </div>
        </div>
    </div>

    <script src="/static/js/main.js"></script>
    <script>
        function closeModalAndRun() {
            document.getElementById('intro-modal').style.display='none';
            document.getElementById('scenario-select').value = 'solar_panel';
            runSimulation();
        }
    </script>
</body>
</html>